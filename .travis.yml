services:
- docker

before_install:
- echo $DOCKER_PASSWD | docker login -u karrot96 --password-stdin
- docker build --target test --tag my-test-image .
script:
- docker run -e TRELLO_BOARD_ID -e TRELLO_API_TOKEN -e TRELLO_API_KEY  my-test-image
after_success:
- docker build --target production --tag karrot96/ToDoApp:$TRAVIS_COMMIT .
- docker push karrot96/ToDoApp:$TRAVIS_COMMIT
- if [[ "$TRAVIS_BRANCH" == "master" ]]; then
      docker push karrot96/ToDoApp:latest
  fi
env:
  global:
  - secure: SoS6POJUKw8d2DCqPNgfLyKPP2HVTDjRhu/LPlSouUj63Wk70XkZT64ZX5BnjNM/C+fO+zj1pQ2TGhiZU7CkIUhlfWiFYB5/VHGck6lzGvrUtQokWg5UuFb9giPZjRMaGStFoPopcV5f0QtISgVLedt81B6fSJoXQbRnk8wOAE8Sg+LeZgEzJfuHAr39/UIO7k+HcHPE5gJL3oclNUJ9sEFDSSH8TUx/UJJ3ysdhDzr51twfeRAf+Km4B/zlHA8vQ1BNLlgUfDKkBd2jiSDdPAivuVmC5AZCsp2mWFp/17g3J3Czve//89uhLY7Kia0G3NYpcNCULOnYbrgQD0f2yEHhNaaQbkKaaSuojs6PAg2q0EVYdMyrChSEki+KTlC/A/gRtoLc8foYZO5CR1acCB13+RMBJzQVf4Md3OmMQsAyVkOS0A00N6i8F9eL1uv6XSyi3m8DktmJxCTc9B9FkgwdHI6LeNSpob9o1CSo35qzvqOEwCVNOMtSrbxcAVXRg9Kl8ew+B/yncnxsdXwBpNFUxyRer0GEnUKTKlUxJjdLWbISxULVyZEKrqnBa4ngNap8dN46ltqOsuJCFkaHxxZMqapN2UG9tz9Kgk4G1pf3wbmbn16ZhrDAAk3KVUlzZstWUz4G9iy5wANhNcqtxvj1r/GpPgohnyuff/wI+Gg=
  - secure: gw2eO4QGte3iNVz5+usKXX0KJZkSuqQLsUHg07TwZM93GHoBjuNBgmo0y/+MEFNl2de3RoExMYfBuBqw9HCYmgHfm1b5s40/5O+a5JrXKiO2N/bInmzZrQC/AxP/kBHMANa4HlFWw4ZqpJAgwvuev8g4pB4RYh+vQEAT+3dHBniQmb5N/9xTsFK9uMlj4mD9jhssOv/vg7wP1OX+LCfu6D3DCHzlm7L1iAxkub6L2R4CpweYeDcj6l+0Wt8i0SwCgMW5rTOFl+EtiD6ga9p7H4AUhIH43ze13R+Hpx0RH52YENdBCPPn9Op4GcMA47OhpO2HGShOCndRxUgJ+e+8MwyqJVY91xxnkgQUfF5wXSJ+IFIOL+ZMuC4n5tdtbUAXaIGtvNJK29Wad6xw+P2fTQ4rZ2hJRorBdq2+Lu2mmwrSkpudqQ2r9Tcz6sBPTzFJNuRcWiim281i+K2tYsnPqaUxvX4tWHQ6k8byhbHuC2OC1sPM/WESzbEp1yeE1KgCE8bnX0WymAhzxYTfn9OKwPlFV8OkIJlr5r3lmUfBM0aOVSKdsk3FKpxVtN94hJ+tUHydzMjCmG3SU+EcD+VAurYKlhCSTJpJ3wr54g/UTfzEzK7IUDs6b8YJrRh+jmNdlm56T2bNq7CTPAjZ0n68M/FQ5hSdEDOPmdvGe54ZnMM=
  - secure: DXQznkL22YWOxxiajdolEkLnZrYLY9MjuJPwK98z7FmLhvu6z/Vi96KYmTL1d7f6IiPYgb46exbYNLDOUZ+njySEZ5oJAh/G9JVdrx9Qu/Fz0Y6nON/YQ2RFDG7LahmlUECbQwxz6vqu4P3BJIvHhe15Gh+k7vzUABg0snViGUew2FinjqO97Rw2e6CYfi2Ta8SEvE25VbRJO26P2wGTuZNauMGydDvu/buQ8wkiWg42WmrV1Z+r44AUbhAxdOGzSGKdF9avN8rK5pDlMkcTbKhVPXK7G6e01KmdFPhy49GogKx9N1tPooVJU09GIrBpFYjWg01nmR3a0hFLyXSAdg/U+5rzp5ltvCpusx16yu5paXOosah+s/hAsc3vp9XywbboNGmtZaMgrN771XT955YGW9hDs6kHuqEtE3WF6T+7YHGdN0dLMMqfDWj6EnPfdTvlPuhSiIdNnxw2Hoyd1TRVsY6m/dP5dReDAmxOg8+5kIMvgRIsohQEgjHE/MM6IXsm47soZJQXDgCmBm1c7gK08ZB5y4/DRroFbhmvkoYNYvK/IzlvH0w9/HRtU+byXUtmIhcfngNHe3UXIo0adlgqr3KB00reOA9ZAZ5RP2PR6Mg3NpXZzMbTIflMSLh+O1azm0drzBxIzLWTBlzBVPk7Hg577wJ5Vhtg0BZ06Vs=
  - secure: idQNSTmweumjw/MtNVl9X1LV82XQeyxQg3TfyC3U9nRnUfUa82MyE3ahZn4hReZ/1qpDIopRk7LDHzW4ZKpjd1ACeLUIJspkPiUj80d6aYKDSmPKm0cXeR9J60jObYafi4nfCuHM+hhNDkdGjC0YO/Sv0uhUqITAXw/B0SoFQI3eqteXWlR6pxYLhDSuwfFweogR+EWKqBBzhQaGqzrd7PVRMdgludjYy3if7swCzGreK6AusCi09cBLCApKnYFlal8/42HZ0Jtk+Cn4ZypDIzpuOFTRk4ipJohnSOacl69e6pjFyyvkevYvJ4G5fwuFQu6SzGRCtvs/IsFyAXj9k0CqT+viBeGtsoT1OPPHlG+/O3Kpca0Q/9X9N7SaQuZqSGkBAKzm5b3EOgpl9Ke8nkfStcj5XkekjMtRZ/S6f7PSZ77Wec+ocW9Mpb3MbrkU4oxnEqOBDBVsSm2+4ZIKOviMUk0xnaftVqPEEzFFc69VGOSmg/zymP7iayGcM3Ze1v7r/xOcGfe7WbEvPguEhti3XV0X5lWOAG0F23qPtpIEJuaME/ioR9lnfI3sf5R0wPhGxV1ipPrNLFHkOCKvSdcuOsVD3MJ65b1PGlBp64pK9TQeXrt7IB2jKiAwt5pdQ537Et7/Dol4FEn7cKriNlfSUfKk7vZO4M4ygs+YzIs=
